## 三大基础 磁盘 进程 内存
- df 磁盘可用空间
- ps 进程状态
- free 内存使用状态

---
### 磁盘和文件
#### 磁盘基础信息
- **寻址方式**
    - 柱面 弃用
    - LBA LOGIC BLOCK ADDRESSING 逻辑块寻址
        - 连续编号的扇区
        - 每次读写单位扇区大小
- **扇区**
    - 512byte扇区
    - 4KB扇区
        - 大容量硬盘 增加扇区大小 减少访问损耗
        - 逻辑上模拟512byte扇区 实际按4kb为单位读写 
            - 适配服务器硬件接口与操作系统
            - 4K对齐 否则操作系统读写4kb数据可能跨越两个扇区
                - 分区的逻辑扇区起始数位于8的倍数
                    分区的开始位置与4KB扇区对齐
                - 文件系统块大小改为4KB

- **分区**
    对硬盘存储空间的 “逻辑划分” 隔离数据、优化管理、提升安全性和适配系统需求（非常底层的隔离）
    - 操作系统启动或访问磁盘时，必须通过分区表定位目标分区
    - 系统文件和用户数据分开存储
    -  **多系统共存** 不同操作系统需占用独立分区，避免引导冲突
    - 按用途分配空间，**适配不同文件系统**特性
- **fdisk/parted** 是 “分区结构管理工具”
    - 功能重叠、适配场景不同
    - 制作GPT格式分区 使用 parted命令
- **大端小端**
    - 小端---主流 绝大多数桌面 / 服务器 CPU
    - 大端---TCP/IP 协议规定 “网络字节序” 为大端

#### 磁盘与启动
- **BIOS MBR 传统GRUB模式**
    - BIOS （Basic Input Output System），固化在主板 ROM 芯片上的一组固件程序 1MB内存空间
        - 硬件自检
        - 读取主引导扇区
    - 主引导扇区（第一个扇区 512B）
        - 包含MBR 引导代码（446 字节）
        - 分区表（64 字节）
            - 主分区有限 + 2³²个扇区
        - 校验用55AA 标志（2 字节）
    - GRUB （Grand Unified Bootloader）
        - Stage1	硬盘 MBR的前 446 字节
            - 定位并加载后续的 Stage1.5
        - Stage1.5 位于保留分区中的活动分区
            - 弥补 Stage1 无法识别文件系统的缺陷。该阶段会加载文件系统驱动，使其能识别硬盘上的分区文件系统，为后续加载存储在分区内的 Stage2 铺路。
        - Stage2 磁盘分区的文件系统中（如 /boot/grub 目录下）
            - 加载 GRUB 的完整配置文件（如 grub.conf），显示可视化的系统启动菜单，供用户选择要启动的操作系统或内核版本，最终完成内核和虚拟文件系统的加载，之后将系统控制权移交内核。
- **UEFI GPT GRUB2模式**
    - UEFI（Unified Extensible Firmware Interface）
        - 主板固件，替代 BIOS，支持图形化配置、鼠标操作
        - 自带文件系统驱动，直接识别 GPT 磁盘与 ESP 分区
        - 支持安全启动，校验引导文件签名防篡改
        - 启动速度快，无 1MB 内存限制
    - GPT（GUID Partition Table）
        - 磁盘分区表格式的标准，替代 MBR
        - 分区表写入 1-33扇区 MBR分区表只有64kb
        - 支持 128 个主分区、最大 9.4ZB 容量
        - 无活动分区概念，依赖 ESP 分区引导
    - GRUB2（Grand Unified Bootloader 2）
        - 引导加载程序，适配 UEFI+GPT 架构
        - 位于ESP（EFI System Partition）
        - 直接调用加载程序 不用分段 相当于只有stage2
        - 配置文件：/boot/grub/grub.cfg（自动生成，不建议手动编辑）
    - ESP（EFI System Partition，EFI 系统分区）
        - 是UEFI 固件可直接识别访问的分区，它的核心作用是支撑系统启动相关流程




